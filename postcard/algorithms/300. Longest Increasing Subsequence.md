---
tags:
  - type/lit
  - topic/learning
  - status/archive
source: 《卡片盒笔记法》 by Sönke Ahrens
aliases:
  - 300. LIS
---
[300. Longest Increasing Subsequence](https://leetcode.com/problems/longest-increasing-subsequence/)
## Text

Given an integer array `nums`, return _the length of the longest **strictly increasing**_ _**subsequence**_.

**Example 1:**
**Input:** nums = $[10,9,2,5,3,7,101,18]$
**Output:** 4
**Explanation:** The longest increasing subsequence is $[2,3,7,101]$, therefore the length is 4.

**Example 2:**
**Input:** nums = $[0,1,0,3,2,3]$
**Output:** 4

**Example 3:**
**Input:** nums = $[7,7,7,7,7,7,7]$
**Output:** 1

**Constraints:**
- `1 <= nums.length <= 2500`
- `-104 <= nums[i] <= 104`
**Follow up:** Can you come up with an algorithm that runs in `O(n log(n))` time complexity?

---
## Thoughts

$[10, 9, 2, 5, 3, 7, 1, 18]$
### Why is it a [[Dynamic Programming]]

### Solution
#### BF
$O(n!)$.
Validate all possible subsequence in length-decreasing way.
```
No:  10,  9,  2,  5,  3,  7,  1, 18
No:   9,  2,  5,  3,  7,  1, 18
No:  10,  2,  5,  3,  7,  1, 18

...

yes:  2,  5,  7, 18
```

#### DP
$O(n^2)$.

| nums | 10  | 9   | 2   | 5   | 3   | 7   | 1   | 18  |
| ---- | --- | --- | --- | --- | --- | --- | --- | --- |
| DP   | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   |
|      | 1   |     |     |     |     |     |     |     |
|      | 1   | 1   |     |     |     |     |     |     |
|      | 1   | 1   | 1   |     |     |     |     |     |
|      | 1   | 1   | 1   | 2   |     |     |     |     |
|      | 1   | 1   | 1   | 2   | 2   |     |     |     |
|      | 1   | 1   | 1   | 2   | 2   | 3   |     |     |
|      | 1   | 1   | 1   | 2   | 2   | 3   | 1   |     |
|      | 1   | 1   | 1   | 2   | 2   | 3   | 1   | 4   |
|      |     |     |     |     |     |     |     |     |
- [[State Space]]: 
	- index `i` is about `index of nums`.
	- `DP[i]` is best subsequence ending with `No.i of nums`
- $DP[i] = \max(1, \max_{j=1}^{i-1}(DP[j]))$

#### Improved-DP (Greedy)

| Index | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   |
| ----- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1     | 10  | 4   | 4   | 2   | 2   | 2   | 1   | 1   |
| 2     |     |     | 5   | 5   | 3   | 3   | 3   | 3   |
| 3     |     |     |     |     |     | 7   | 7   | 7   |
| 4     |     |     |     |     |     |     |     | 18  |
| No.   | 10  | 4   | 5   | 2   | 3   | 7   | 1   | 18  |

- data: `Tails`
	- `tails[i]` is Minimal number that is an end of `i-length`subsequence.
- example: 
	- `step 5`: 
		- tails($[2,5]$) means the are 2 available subsequence:
			- $[2]$
			- $[x, 5]$ // May not 2(I mean `tails[0]`)
		- `nums[5]=3` $2>3>5$
			- you can imply that there are [2,3] that can replace `5`

---
## related
[[Lower Bound]]