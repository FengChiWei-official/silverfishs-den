### 项目目标

该项目的目标是利用深度学习框架，基于图像进行**生物量回归分析**，具体而言，即通过局部图像块的特征来预测生物量值。

### 当前框架

- **特征提取**：使用**预训练的 DINO 模型骨干网络**提取图像块级别的特征。
    
- **模型架构**：将这些特征展平后，输入一个**权重共享的多层感知机**，以预测每个图像块的密度值（$\rho$）。
    
- **密度估计**：该 MLP 用于估计每个图像块内的局部生物量密度。
    
- **聚合方法**：通过对所有图像块的预测输出进行**求和或平均**，来计算整张图像全局层面的生物量。
    

### 关键挑战

- **弱监督学习（不适定问题）**：模型仅拥有图像级别的标签（总生物量）。由于模型需要“推测”总生物量如何分配到各个图像块，这导致了数学上存在无穷多解，从而阻碍了 MLP 学习到物理意义上准确的图像块级 $\rho$值。
    
- **数据集规模小**：仅有 **300 张图像**，模型过拟合的风险很高。目前采用了 6 种数据变换方法来缓解此问题。
    
- **数据泄露与分布问题**：
    
    - 同一天采集的多张图像可能导致验证过程中出现**数据泄露**。
        
    - **季节性变化**导致数据分布差异巨大，使得标准模型难以泛化。
        
    

### 后续计划

#### 数据预处理与验证

- **高级数据增强**：采用 **Mixup**​ 或 **Cutup**​ 等技术，生成更多样化的训练样本，以应对季节性变化。
    
- **鲁棒的验证策略**：使用**按日期/地点分组的分层 K 折交叉验证**，防止数据泄露，并确保模型能在不同生物量范围和时间段上良好泛化。
    

#### 结构修改

计划从简单的均值聚合转向以下两种主要路径：

- **路径 A：传统混合方法（BoVW + SVR）**
    
    - 使用 **K-Means**​ 对 DINO 提取的图像块特征进行聚类，构建“视觉词典”。
        
    - 将图像表示为 **Bag of Visual Words 直方图**。
        
    - 使用**支持向量回归机**进行最终预测。这种方法在小数据集（300 个样本）上通常更稳定。
        
    
- **路径 B：基于深度学习的注意力机制**
    
    - 保留使用 **ReLU**​ 激活函数的**共享权重 MLP**。
        
    - 用**注意力汇聚机制**替代简单的求和操作。这使模型能够“权衡”各个图像块的重要性（例如，关注植被而忽略背景），有助于解决不适定的分布问题。
        
    

### 针对“不适定问题”的解决方案总结

通过转向**注意力机制**或 **BoVW 方法**，核心在于教导模型识别**哪些**图像块对生物量有贡献，而不是盲目地将全局总值平均分配到所有图像块上。

---

**格式说明**：在整理此 Markdown 文档时，已注意中英文之间增加空格，并使用全角中文标点符号。文中的希腊字母（如 ρ）和代码片段（如 `config`）已使用反引号进行标识。